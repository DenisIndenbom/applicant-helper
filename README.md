# Бот для помощи абитуриентам.

## Описание

Этот бот нужен для помощи кураторам и абитуриентам образовательной программы "Прикладной Анализ Данных" в НИУ ВШЭ.
В данный момент бот имитирует личность выпускника этой ОП, Артема Макарова.
Ссылка на бота: @dsba_helper_bot

## Функционал

1. Автоматизация ответов.
   - В групповом чате достаточно написать сообщение с одним из ключевых слов, например "Артем", а далее задать свой вопрос, или просто написать ключевое слово, бот на него ответит.
   - Если вы хотите, чтобы бот ответил на сообщение другого пользователя, то отправьте "!а" в чат, используя встроенную функцию Телеграм "ответить", в ответ на сообщение, которое вас интересует.
   - В личных сообщениях можно задавать вопросы без использования ключевых слов.
2. Анонимные вопросы.
   - В случае, если абитуриент стесняется задать вопрос кураторам напрямую, он может задать этот вопрос в беседе анонимно, через бота. Достаточно под любым из ответов бота в личных сообщениях нажать соответствующую кнопку.
3. Пересказ сообщений.
   - Иногда в чате скапливается большое количество сообщений за короткое время, и не всегда есть время и желание их читать. Это не беда, ведь бот хранит последние 50 сообщений в чате, и с помощью команды /summarize можно попросить его сделать их краткий пересказ.
4. Добавление новых пар вопрос-ответ.
   - Отправив в ответ на какое то из сообщений в беседе (используя встроенную функцию Телеграм "отправить") сообщение, содержащее ключевые знаки "&&", можно добавить в таблицу пару вопрос-ответ, где вопросом(ключевыми словами) будет ваше сообщение за исключением ключевых знаков, а ответом - то сообщение, на которое вы отвечаете.
5. Обновление данных.
   - Если в таблицу были внесены изменения вручную, то можно обновить память бота, используя команду /refresh.

	Примечание: в данный момент, все функции бота работают только в неофициальном чате абитуриентов ПАД 2024 года набора. 
## Использование
0. Убедитесь, что у вас установлены Python и Git.
1. Откройте терминал, зайдите в папку, в которую хотите скопировать репозиторий, затем, выполните эти команды:
```shell
git clone https://github.com/nggurbanov/applicant-helper.git
cd applicant-helper
```
2. Создайте и активируйте виртуальную среду:
- MacOS и Linux:
```shell
python3 -m venv helper
source helper/bin/activate
```
- Windows:
```shell
python -m venv helper
helper\Scripts\activate
```
3. Установите все необходимые библиотеки:
```shell
pip install -r requirements.txt
```
4. Создайте в этой папке файл с названием .env, в который поместите следующую информацию:
```
BOT_TOKEN=<ТОКЕН ВАШЕГО ТЕЛЕГРАМ БОТА (можно получить у @botfather)>
OPENAI_API_KEY=<ВАШ АПИ-КЛЮЧ ДЛЯ OPENAI>
```
5. Создайте папку gspread_handler, в ней нужно создать два файла:
   - url.txt - ссылка на гугл таблицу (должно быть открыто редактирование)
   -  key.json - ваш сервисный ключ для работы с gspread. 
      Подробнее: https://docs.gspread.org/en/v6.1.0/oauth2.html#service-account
6. В терминале выполните следующую команду:
```shell
python artem.py
```
## Дополнительно
Если вы хотите, чтобы бот работал в другой беседе, отвечал на другие ключевые слова и т.д., вам нужно будет самостоятельно изменить соответствующие файлы в папке "underground_info". Это не так сложно :)
